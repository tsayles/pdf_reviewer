<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Reviewer</title>
    <link rel="stylesheet" href="../css/pdf_reviewer.css">

</head>
<body>
    <h1>PDF Reviewer</h1>
    <!--    Display the text file and pdf file next to each other-->
    <div class="container">
        <div class="text">
            <h2>Text File</h2>
            <form>
                <!-- editable text box-->
                <textarea src="" name="text" id="text" class="test_area"></textarea>
                <button type="submit">Save</button>
            </form>
        </div>
        <div class="pdf">
            <h2>PDF File</h2>
            <p id="pdf_name_display">loading..</p>
<!--            using the variable pdf_file load file content into the pdf viewer -->
            <embed id="pdf_embed" src="" type="application/pdf" width="100%" height="1000px">


        </div>
    </div>


</body>
 <script>
        // ** get text_file and pdf_file as parameters from the url
        // Use typescript as the preferred language for the project
        // Use the following code to get the parameters from the url
        const document_path = "/pdf_reviewer/public/"
        var url = new URL(window.location.href);
        var text_file = document_path + url.searchParams.get("text_filename");
        var pdf_file = document_path + url.searchParams.get("pdf_filename");

        // example URL
        // http://localhost:63342/pdf_reviewer/index.html?text_filename=sample.txt&pdf_filename=sample.pdf


        // Use the following code to display the parameters
        console.log(text_file);
        console.log(pdf_file);

        // dump the contents of the text_file file to the console
        // and set the contents of the text file to the text box
        fetch(text_file)
            .then(response => response.text())
            .then(data => {
                // console.log('data', data);
                document.getElementById('text').value = data;
            });

        // dump the contents of the pdf_file file to the embed pdf viewer
        document.getElementById('pdf_embed').src = pdf_file;
        document.getElementById('pdf_name_display').innerText = pdf_file;
        console.log(document.getElementById('pdf').src);


    </script>
</html>